version: 1

meta:
  environment: docker
  toolchain:
    name: docker

build:
  dockerfile: Dockerfile
  args:
    REACT_APP_API_URL: https://amvera-limslava-run-trader
    REACT_APP_WS_URL: wss://amvera-limslava-run-trader

run:
  containerPort: 80
  env:
    # Database
    DATABASE_URL: postgresql://user:password@host:5432/db?schema=public&sslmode=require
    # Server
    PORT: 80
    NODE_ENV: production
    # JWT
    JWT_SECRET: temporary_jwt_secret_for_testing_12345678901234567890
    JWT_EXPIRES_IN: 24h
    # CORS
    CORS_ORIGINS: https://amvera-limslava-run-trader
    FRONTEND_URL: https://amvera-limslava-run-trader

deploy:
  replicas: 1
  resources:
    memory: 1024Mi
    cpu: 500m